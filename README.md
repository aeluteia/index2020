# Index 2020 - Proof of Concept

This is a test to see how well this stack would work for the Index 2020.

## Requirements

Make sure to have a recent version of [NodeJS](https://nodejs.org). This project is developed using NodeJS 12. Further, install the [Yarn package manager](https://yarnpkg.com/).

To fetch the editorial content from Google Docs the authentication token for Google Drive has to be placed in the `./.auth.json` file in the repository root.

## Getting Started

Install all dependencies,

```sh
yarn install
```

### Storybook

There is a [Storybook](https://storybook.js.org/) for UI component development.

```sh
yarn storybook
```

The Storybook is accessible at `http://localhost:6006`.

### Development server

```sh
yarn install
yarn dev
```

Open [http://localhost:3000/index2020](http://localhost:3000/index2020) with your browser to see the result.

### Verify

```sh
yarn verify
```

This will run `yarn lint` and `yarn type-check`.

### Production builds

```sh
yarn prod
```

### Navigation

The navigation structure is defined as a JSON file in [`data/navigation.json`](data/navigation.json). This file generated by calling `yarn navigation`, which loads the companies and indicators from CSV, and dynamically generates the final menu structure. Edit [`src/navigation.ts`](src/navigation.ts) to modify the menu template. The menu structure can be defined recursively, but the `Navigation` component will render menu nodes only 2 levels deep.

## `indexctl`

The `bin/indexctl.ts` script provides operational support for the index 2020. See all available commands by calling `yarn indexctl -h`.

```sh
$ yarn indexctl -h

yarn run v1.22.4
$ ts-node --transpile-only -P tsconfig.ts-node.json bin/indexctl.ts -h
indexctl <command>

Commands:
  indexctl fixtures    generate data fixtures.
  indexctl navigation  generate navigation structure.

Options:
  -h, --help  Show help                                                [boolean]
```
